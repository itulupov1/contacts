!function(t){var e={};function n(a){if(e[a])return e[a].exports;var c=e[a]={i:a,l:!1,exports:{}};return t[a].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)n.d(a,c,function(e){return t[e]}.bind(null,c));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist",n(n.s=0)}([function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}document.addEventListener("DOMContentLoaded",(function(){"use strict";new(function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contactsRow=document.querySelector(e),this.contactsData=JSON.parse(localStorage.getItem("contactsArr")),this.form=document.querySelector(n),this.formInputs=document.querySelectorAll(a)}var e,a,c;return e=t,(a=[{key:"requestData",value:function(){var t=this,e=new XMLHttpRequest;e.open("GET","./src/users.json"),e.setRequestHeader("Content-type","application/json"),e.send(),e.addEventListener("readystatechange",(function(){4===e.readyState&&200===e.status&&(t.contactsData=JSON.parse(e.responseText),t.render(),t.updateStorage())}))}},{key:"updateStorage",value:function(){localStorage.clear(),localStorage.setItem("contactsArr",JSON.stringify(this.contactsData))}},{key:"render",value:function(){this.contactsRow.textContent="",null==this.contactsData||0===this.contactsData.length?this.requestData():(this.contactsData.forEach(this.createItem,this),this.updateStorage()),this.btnsRemove=document.querySelectorAll(".contacts-item-content__remove"),this.btnsEdit=document.querySelectorAll(".contacts-item-content__edit"),this.btnsSave=document.querySelectorAll(".contacts-item-content__save"),this.contactItemsContent=document.querySelectorAll(".contacts-item-content"),this.formInputs.forEach((function(t){t.value=""})),document.querySelector(".contacts-top__add-link").classList.remove("active"),document.querySelector(".contacts-top__newcontact").classList.remove("active")}},{key:"createItem",value:function(t){var e=document.createElement("div");e.classList.add("contacts__item","contacts-item"),e.id=t.id,e.insertAdjacentHTML("beforeend",'\n\t\t\t<div class="contacts-item__header contacts-item-header">\n\t\t\t\t<div class="contacts-item-header__title">'.concat(t.name,'</div>\n\t\t\t\t<div class="contacts-item-header__img">\n\t\t\t\t\t<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t<path d="M1 10L7 4L13 10" stroke="#888888" stroke-width="1.5"></path>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="contacts-item__content contacts-item-content">\n\t\t\t\t<div class="contacts-item-content__phone telephone">\n\t\t\t\t\t<div class="telephone__title">Телефон</div>\n\t\t\t\t\t<div class="telephone__number" data-name="phone">').concat(t.phone,'</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="contacts-item-content__phone telephone">\n\t\t\t\t\t<div class="telephone__title">Почта</div>\n\t\t\t\t\t<div class="telephone__number" data-name="email">').concat(t.email,'</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="contacts-item-content__phone telephone">\n\t\t\t\t\t<div class="telephone__title">Сайт</div>\n\t\t\t\t\t<div class="telephone__number" data-name="website">').concat(t.website,'</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="contacts-item-content__phone telephone">\n\t\t\t\t\t<div class="telephone__title">Никнейм</div>\n\t\t\t\t\t<div class="telephone__number text" data-name="username">').concat(t.username,'</div>\n\t\t\t\t</div>\n\t\t\t\t<button class="contacts-item-content__edit" >\n\t\t\t\t<i class="fa fa-pencil" aria-hidden="true"></i> Изменить</button>\n\t\t\t\t<button class="contacts-item-content__save" disabled="true">\n\t\t\t\t<i class="fa fa-floppy-o" aria-hidden="true"></i> Сохранить</button>\n\t\t\t\t<button class="contacts-item-content__cancel" disabled="true">\n\t\t\t\t<i class="fa fa-ban" aria-hidden="true"></i> Отмена</button>\n\t\t\t\t<button class="contacts-item-content__remove">\n\t\t\t\t<i class="fa fa-trash" aria-hidden="true"></i> Удалить</button>\n\t\t\t</div>\n\t\t\t\t')),this.contactsRow.append(e)}},{key:"deleteItem",value:function(t){this.contactsData.splice(t,1),this.render()}},{key:"editItem",value:function(t,e){t.classList.add("lock"),t.querySelector(".contacts-item-content__cancel").removeAttribute("disabled"),t.querySelector(".contacts-item-content__save").removeAttribute("disabled");var n,a=t.parentNode.querySelector(".contacts-item-header__title").textContent;t.parentNode.querySelector(".contacts-item-header__title").textContent="",t.parentNode.querySelector(".contacts-item-header__title").insertAdjacentHTML("beforeend",'<input type="text" name="name" id="" value="'.concat(a,'">')),this.contactItemsContent[e].querySelectorAll(".telephone__number").forEach((function(t,e){n=t.textContent,t.textContent="",t.insertAdjacentHTML("beforeend",'<input type="text" name="'.concat(t.dataset.name,'" id="').concat(e,'" value="').concat(n,'">'))}))}},{key:"saveItem",value:function(t,e){var n,a=this;t.classList.remove("lock"),this.contactItemsContent[e].querySelectorAll(".telephone__number").forEach((function(e){n=e.querySelector("input").value,a.contactsData.forEach((function(a){a.id==e.parentNode.parentNode.parentNode.id&&(a[e.dataset.name]=n,a.name=t.parentNode.querySelector("input[name=name]").value)}))}))}},{key:"addNewContact",value:function(t){t.preventDefault();var e={};this.formInputs.forEach((function(t){e[t.name]=t.value})),e.id=this.contactsData.length,this.contactsData.push(e),console.log(this.contactsData),this.updateStorage(),this.render()}},{key:"handler",value:function(){var t=this;this.contactsRow.addEventListener("click",(function(e){var n=e.target;n.classList.contains("contacts-item-content__remove")?t.btnsRemove.forEach((function(e){t.contactsData.forEach((function(a,c){n===e&&n.parentNode.parentNode.id==a.id&&(console.log(n.parentNode.parentNode.id),t.deleteItem(c))}))})):n.classList.contains("contacts-item-content__edit")&&t.btnsEdit.forEach((function(e,a){t.contactItemsContent.forEach((function(c,o){n===e&&a===o&&t.editItem(c,o)}))})),n.classList.contains("contacts-item-content__cancel")?t.render():n.classList.contains("contacts-item-content__save")&&(t.btnsSave.forEach((function(e,a){t.contactItemsContent.forEach((function(c,o){n===e&&a===o&&t.saveItem(c,o)}))})),t.updateStorage(),t.render()),n.classList.contains("contacts-item-header")&&t.animate(n)})),document.querySelector(".contacts-top__add-link").addEventListener("click",(function(t){t.preventDefault();var e=t.target;e.closest(".contacts-top__add-link").classList.toggle("active"),e.parentNode.parentNode.parentNode.parentNode.querySelector(".contacts-top__newcontact").classList.toggle("active")})),this.form.addEventListener("submit",this.addNewContact.bind(this))}},{key:"animate",value:function(t){t.parentNode.querySelector(".contacts-item-content").classList.toggle("curr"),t.classList.toggle("curr-img")}},{key:"init",value:function(){this.render(),this.handler()}}])&&n(e.prototype,a),c&&n(e,c),t}())(".contacts__row",".form",".form__input").init()}))}]);